<!-- <ng-container *ngIf="!State?.Loading"> -->

<lcu-breadcrumb
  [project-lookup]="ProjectLookup"
  [application-lookup]="ApplicationLookup"
  [selected-route]="CurrentApplicationRoute"
>
</lcu-breadcrumb>

<lcu-three-column>
  <div left>
    <lcu-project-info-card
      [name]="Application?.Application?.Name"
      [description]="Application?.Application?.Description"
      [is-editable]="IsInfoCardEditable"
      [is-shareable]="IsInfoCardShareable"
      [loading]="State?.Loading"
      (left-click-event)="HandleLeftClickEvent($event)"
      (right-click-event)="HandleRightClickEvent($event)"
    >
      <!-- Commented out until implemented -->
      <!-- <lcu-card-carousel
                        [stats]="Stats">
                    </lcu-card-carousel> -->

      <div
        promo
        class="promo-container"
        fxLayout="column"
        fxLayoutAlign="center center"
        fxLayout.lt-md="row"
        fxLayoutAlign.lt-md="space-around center"
      >
        <div>Access exclusive tools & insights</div>
        <div fxLayout="row" fxLayoutAlign="start center">
          <mat-icon class="gold-icon">emoji_events</mat-icon>
          <div class="upgrade-text" (click)="UpgradeClicked()">
            Upgrade to premium now
          </div>
        </div>
      </div>

      <button
        *ngIf="Application.Processor.Type === 'DFS'"
        action
        mat-button
        class="info-card-btn"
        (click)="SettingsClicked()"
        matTooltip="Update your application to the latest package"
      >
        <mat-icon>outbox</mat-icon>
        Update Package
      </button>
    </lcu-project-info-card>

    <!-- Commented out until implemented -->
    <!-- <lcu-analytics-card
            title="Application Stats"
            subtext="Text for testing purposes">
        </lcu-analytics-card> -->
  </div>
  <div>
    <!-- <lcu-edit-application-form 
                [editing-application]="Application"
                (save-form-event)="SaveApplication($event)">
            </lcu-edit-application-form> -->

    <lcu-processor-details-form
      more-details
      [editing-application]="Application"
      [editing-application-lookup]="ApplicationLookup"
      [loading]="State?.Loading"
      [source-control-lookups]="SourceControlLookups"
      [project-lookup]="ProjectLookup"
      (save-form-event)="SaveProcessorDetails($event)"
    >
    </lcu-processor-details-form>

    <lcu-loader [loading]="State?.LoadingFeed"></lcu-loader>

    <ng-container *ngIf="!State?.LoadingFeed">
      <div *ngFor="let feedItem of State?.Feed">
        <lcu-main-feed-card [feed-item]="feedItem">
        </lcu-main-feed-card>
      </div>
    </ng-container>
  </div>
  <div right>
    <lcu-security-toggle
      [editing-application]="Application"
      [loading]="State?.Loading"
      (save-form-event)="SaveSecuritySettings($event)"
    >
    </lcu-security-toggle>

    <!-- <lcu-source-control-form 
                [editing-application]="Application" 
                [environment]="Environment"
                (save-form-event)="SaveSourceControl($event)">
            </lcu-source-control-form> -->
  </div>
</lcu-three-column>
<!-- </ng-container> -->
