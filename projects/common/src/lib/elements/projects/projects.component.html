<app-host-dashboard-card-element
  [context]="{ Title: 'Projects', Icon: 'language' }"
>
  <nav>
    <mat-form-field
      class="mat-full-width"
      *ngIf="State.Enterprises?.length > 1"
    >
      <mat-select
        placeholder="Active Enterprise ({{ State.ActiveEnterpriseLookup }})"
        [value]="State.ActiveEnterpriseLookup"
        (selectionChange)="ActiveEnterpriseChanged($event)"
      >
        <mat-option [value]="ent.Lookup" *ngFor="let ent of State.Enterprises">
          {{ ent.Name }}
        </mat-option>
      </mat-select>
    </mat-form-field>

    <a
      href="/docs/getting-started/projects"
      target="_blank"
      lcuEvent="click"
      label="Projects"
      category="help"
    >
      <mat-icon matTooltip="More info">help_outline</mat-icon>
    </a>
  </nav>

  <ng-container *ngIf="!State?.Loading">
    <div
      fxLayout="column"
      fxLayoutAlign="center center"
      class="margin-bottom-4"
    >
      <h2 class="mat-display-2 margin-y-2" *ngIf="ProjectLookups?.length <= 0">
        <span> Thank you for signing up </span>
      </h2>
    </div>

    <lcu-git-auth *ngIf="!State.GitHub.HasConnection"></lcu-git-auth>

    <ng-container *ngIf="State.GitHub.HasConnection">
      <!-- <div *ngIf="!CreatingProject">
        Creating
        <lcu-create-project-wizard></lcu-create-project-wizard>
      </div> -->

      <ng-container>
        <ng-container *ngIf="State">
          <lcu-projects-header
            [projects]="State.EaC?.Projects"
            [creating-project]="CreatingProject"
            [selected-project-lookup]="EditingProjectLookup"
          ></lcu-projects-header>

          <div *ngIf="EditingProject">
            <div class="divider margin-bottom-3"></div>
            <lcu-project-tabs
              [project]="EditingProject"
              [project-lookup]="EditingProjectLookup"
              [applications]="State.EaC?.Applications"
              [host-dns-instance]="State.HostDNSInstance"
              class="margin-top-3"
            >
            </lcu-project-tabs>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </ng-container>

  <div class="loading" *ngIf="State?.Loading">
    <lcu-loader [loading]="State?.Loading"></lcu-loader>

    <div class="margin-3">
      <p *ngIf="!State.UserEnterpriseLookup">Loading your projects</p>

      <p *ngIf="State.UserEnterpriseLookup">Loading your Dashboard.</p>
    </div>
  </div>

  <!-- <div>
    <pre>{{ State | json }}</pre>
  </div> -->
</app-host-dashboard-card-element>
