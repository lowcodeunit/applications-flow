<!-- <ng-container *ngIf="!State?.Loading"> -->

<lcu-breadcrumb [project-lookup]="ProjectLookup"> </lcu-breadcrumb>

<lcu-three-column>
  <!-- left column -->
  <div left>
    <lcu-project-info-card
      [name]="Project?.Project?.Name"
      [description]="Project?.Project?.Description"
      [is-editable]="IsInfoCardEditable"
      [is-shareable]="IsInfoCardShareable"
      [loading]="State?.Loading"
      [subtext]="Project?.Hosts[Project?.Hosts.length - 1]"
      (left-click-event)="HandleLeftClickEvent($event)"
      (right-click-event)="HandleRightClickEvent($event)"
    >
      <!-- Commented out until implemented -->
      <!-- <lcu-card-carousel
        [stats]="Stats">
        </lcu-card-carousel> -->

      <div
        promo
        class="promo-container"
        fxLayout="column"
        fxLayoutAlign="center center"
        fxLayout.lt-md="row"
        fxLayoutAlign.lt-md="space-around center"
      >
        <div>Access exclusive tools & insights</div>

        <div fxLayout="row" fxLayoutAlign="start center">
          <mat-icon class="gold-icon">emoji_events</mat-icon>

          <div class="upgrade-text" (click)="UpgradeClicked()">
            Upgrade to premium now
          </div>
        </div>
      </div>

      <button
        action
        mat-button
        class="info-card-btn"
        (click)="SettingsClicked()"
      >
        <mat-icon>settings</mat-icon>
        Project Settings
      </button>
    </lcu-project-info-card>

    <!-- <lcu-analytics-card
            title="Temp Title"
            subtext="Text for testing purposes">
        </lcu-analytics-card> -->
  </div>

  <!-- center column -->
  <div>
    <!-- Commented out until github api is hooked up -->
    <!-- <lcu-gh-control></lcu-gh-control> -->

    <!-- <lcu-feed-card-sm
        title="Build 54"
        subtext="main"
        description="description for testing"
        icon="cancel"
      >
        <div actions>
          <button mat-icon-button (click)="LaunchBuildClicked()">
            <mat-icon>launch</mat-icon>
          </button>
          <button mat-raised-button (click)="ViewBuildDetails()">
            View Full Details
          </button>
        </div>
      </lcu-feed-card-sm>

        </lcu-feed-card-sm> -->

    <lcu-loader [loading]="State?.LoadingFeed"></lcu-loader>

    <ng-container *ngIf="!State?.LoadingFeed">
      <div *ngFor="let feedItem of State?.Feed">
        <lcu-main-feed-card [feed-item]="feedItem">
        </lcu-main-feed-card>
      </div>
    </ng-container>
    <!-- Commented out until implemented -->
  </div>

  <!-- right column -->
  <div right>
    <lcu-slotted-card
      title="Routes"
      icon="route"
      [loading]="State?.Loading"
      [main-slot-description]="NumberOfRoutes + ' route(s) configured'"
      secondary-slot-description="Add quick route"
      (main-action-clicked)="OpenNewAppDialog($event)"
      action-text="Create New Application"
    >
      <div
        class="main-slot-container"
        fxLayout="row"
        *ngFor="let appRoute of ApplicationRoutes"
      >
        <div
          class="slot-content"
          fxLayout="row"
          fxLayoutAlign="space-between center"
        >
          <div class="slot-header-container" fxLayout="column">
            <div class="slot-header" fxLayout="row">
              <!-- this icon is a temp placeholder -->
              <!-- <mat-icon class="slot-icon">route</mat-icon> -->
              <div *ngIf="appRoute" class="slot-name">{{ appRoute }}</div>
            </div>

            <div>
              <div *ngIf="appRoute.Description" class="slot-description">
                {{ appRoute.Description }}
              </div>
            </div>
          </div>

          <div
            class="slot-actions-container"
            fxLayout="row"
            fxLayoutAlign="space-around center"
          >
            <!-- <div 
              class="main-slot-container" 
              fxLayout="row" 
              *ngFor="let appRoute of ApplicationRoutes"
            > -->
            <div
              class="slot-content"
              fxLayout="row"
              fxLayoutAlign="space-between center"
            >
              <a
                class="slot-action-anchor"
                [routerLink]="['/routes', appRoute, ProjectLookup]"
              >
                <mat-icon class="action-icon">edit</mat-icon>
              </a>
              <a
                class="slot-action-anchor"
                [href]="
                  'https://' +
                  Project?.Hosts[Project?.Hosts?.length - 1] +
                  appRoute
                "
                target="_blank"
              >
                <mat-icon class="action-icon">launch</mat-icon>
              </a>
            </div>
            <!-- </div> -->
          </div>
        </div>
      </div>
    </lcu-slotted-card>

    <lcu-slotted-card
      title="Custom Domain"
      icon="domain"
      [loading]="State?.Loading"
      main-slot-description="Current Domain"
    >
      <div class="main-slot-container" fxLayout="row">
        <div
          class="slot-content"
          fxLayout="row"
          fxLayoutAlign="space-between center"
        >
          <div class="slot-header-container" fxLayout="column">
            <div class="slot-header" fxLayout="row">
              <div class="slot-name">
                {{ Project?.Hosts[Project?.Hosts?.length - 1] }}
              </div>
            </div>
          </div>

          <div
            class="slot-actions-container"
            fxLayout="row"
            fxLayoutAlign="space-around center"
          >
            <a class="slot-action-anchor" (click)="EditCustomDomain()">
              <mat-icon class="action-icon" matTooltip="Edit Custom Domain"
                >edit</mat-icon
              >
            </a>
          </div>
        </div>
      </div>
    </lcu-slotted-card>
  </div>
</lcu-three-column>
<!-- </ng-container> -->
